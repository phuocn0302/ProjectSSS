[gd_scene load_steps=24 format=3 uid="uid://10pxsohagw8h"]

[ext_resource type="Script" uid="uid://bg1d44hk8sfni" path="res://gdj/stages/wave_stage/WaveStageManager.gdj" id="1_nx0lj"]
[ext_resource type="PackedScene" uid="uid://dlkqlab5u0ccw" path="res://src/entities/bosses/worm/worm_boss.tscn" id="2_0hrok"]
[ext_resource type="Script" uid="uid://cog4u1myqrsjt" path="res://gdj/stages/wave_stage/WaveStageData.gdj" id="3_m11n4"]
[ext_resource type="Script" uid="uid://cjecllwrga6ph" path="res://gdj/stages/wave_stage/WaveData.gdj" id="4_70i7i"]
[ext_resource type="PackedScene" uid="uid://dr7pqmtnhu0al" path="res://src/entities/enemies/ship_enemy.tscn" id="5_m11n4"]
[ext_resource type="Resource" uid="uid://cfy1gqy4ykt08" path="res://src/stages/wave_stage/resources/basic_enemy_spawnpoint.tres" id="6_ghsn8"]
[ext_resource type="PackedScene" uid="uid://c3r221u0fps10" path="res://src/entities/enemies/spin_enemy.tscn" id="7_70i7i"]
[ext_resource type="PackedScene" uid="uid://dsw1h3kypkuvs" path="res://src/entities/enemies/capy_enemy.tscn" id="7_a3teg"]
[ext_resource type="PackedScene" uid="uid://c3rf03lph6xe7" path="res://src/stages/title_screen/title_screen.tscn" id="9_nso0c"]
[ext_resource type="FontFile" uid="uid://dd7cq4p1wglng" path="res://assets/font/monogram.ttf" id="9_wh18t"]
[ext_resource type="Texture2D" uid="uid://c1ijkynb2addy" path="res://assets/texture/ui/health_bar.png" id="10_qhkvt"]
[ext_resource type="Texture2D" uid="uid://ckfe8jdrlb7eg" path="res://assets/texture/ui/player_health_bar.png" id="11_mcvco"]
[ext_resource type="PackedScene" uid="uid://oalne3evw244" path="res://src/entities/player/player.tscn" id="12_1rld6"]
[ext_resource type="AudioStream" uid="uid://boutsuxrtu2tb" path="res://assets/sounds/bgm/Juhani Junkala [Retro Game Music Pack] Level 3.wav" id="14_m11n4"]

[sub_resource type="Resource" id="Resource_ghsn8"]
script = ExtResource("4_70i7i")
enemy_scene = ExtResource("5_m11n4")
wave_duration_seconds = 5.0
spawn_interval_seconds = 1.0
enemy_spawn_positions = ExtResource("6_ghsn8")
metadata/_custom_type_script = "uid://cjecllwrga6ph"

[sub_resource type="Resource" id="Resource_a3teg"]
script = ExtResource("4_70i7i")
enemy_scene = ExtResource("7_70i7i")
wave_duration_seconds = 5.0
spawn_interval_seconds = 2.0
enemy_spawn_positions = ExtResource("6_ghsn8")
metadata/_custom_type_script = "uid://cjecllwrga6ph"

[sub_resource type="Resource" id="Resource_04p2q"]
script = ExtResource("4_70i7i")
enemy_scene = ExtResource("7_a3teg")
wave_duration_seconds = 10.0
spawn_interval_seconds = 2.0
enemy_spawn_positions = ExtResource("6_ghsn8")
metadata/_custom_type_script = "uid://cjecllwrga6ph"

[sub_resource type="Resource" id="Resource_d4n73"]
script = ExtResource("3_m11n4")
waves = Array[ExtResource("4_70i7i")]([SubResource("Resource_ghsn8"), SubResource("Resource_a3teg"), SubResource("Resource_04p2q")])
inter_wave_delay_seconds = 2.0
boss_scene = ExtResource("2_0hrok")
metadata/_custom_type_script = "uid://cog4u1myqrsjt"

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_pffej"]
bg_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_h0ta5"]
bg_color = Color(1, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_3t3pf"]
bg_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_osogt"]
bg_color = Color(0, 0.898039, 0.960784, 1)

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_osogt"]
particle_flag_disable_z = true
emission_shape_offset = Vector3(90, 0, 0)
emission_shape_scale = Vector3(90, 1, 1)
emission_shape = 3
emission_box_extents = Vector3(1, 1, 1)
direction = Vector3(0, 1, 0)
spread = 0.0
initial_velocity_min = 180.0
initial_velocity_max = 220.0
gravity = Vector3(0, 0, 0)

[node name="Stage2" type="Node2D"]
script = ExtResource("1_nx0lj")
wave_stage_data = SubResource("Resource_d4n73")
next_stage = ExtResource("9_nso0c")
metadata/_custom_type_script = "uid://bg1d44hk8sfni"

[node name="CanvasLayer" type="CanvasLayer" parent="."]
unique_name_in_owner = true

[node name="InputHint" type="Label" parent="CanvasLayer"]
unique_name_in_owner = true
visible = false
offset_left = 54.0
offset_top = 120.0
offset_right = 126.0
offset_bottom = 165.0
theme_override_fonts/font = ExtResource("9_wh18t")
theme_override_font_sizes/font_size = 0
text = "Drag: Move
Swipe: Dash"
metadata/_edit_lock_ = true

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0)
offset_right = 180.0
offset_bottom = 320.0
color = Color(0, 0, 0, 1)
metadata/_edit_lock_ = true

[node name="BossHealthBar" type="ProgressBar" parent="CanvasLayer"]
unique_name_in_owner = true
z_index = 1000
offset_left = 4.0
offset_top = 5.0
offset_right = 176.0
offset_bottom = 12.0
theme_override_styles/background = SubResource("StyleBoxFlat_pffej")
theme_override_styles/fill = SubResource("StyleBoxFlat_h0ta5")
value = 100.0
show_percentage = false
metadata/_edit_use_anchors_ = true

[node name="Sprite" type="Sprite2D" parent="CanvasLayer/BossHealthBar"]
unique_name_in_owner = true
position = Vector2(86, 4)
texture = ExtResource("10_qhkvt")

[node name="PlayerHealthBar" type="ProgressBar" parent="CanvasLayer"]
unique_name_in_owner = true
offset_left = 24.0
offset_top = 311.0
offset_right = 178.0
offset_bottom = 319.0
theme_override_styles/background = SubResource("StyleBoxFlat_3t3pf")
theme_override_styles/fill = SubResource("StyleBoxFlat_osogt")
value = 100.0
show_percentage = false
metadata/_edit_use_anchors_ = true

[node name="Sprite2D" type="Sprite2D" parent="CanvasLayer/PlayerHealthBar"]
position = Vector2(65, -7)
texture = ExtResource("11_mcvco")

[node name="Score" type="Label" parent="CanvasLayer"]
unique_name_in_owner = true
offset_left = 24.0
offset_top = 296.0
offset_right = 84.0
offset_bottom = 319.0
theme_override_fonts/font = ExtResource("9_wh18t")
text = "Score: 100"
metadata/_edit_use_anchors_ = true

[node name="WaveNumber" type="Label" parent="CanvasLayer"]
unique_name_in_owner = true
offset_left = 129.0
offset_top = 296.0
offset_right = 177.0
offset_bottom = 319.0
theme_override_fonts/font = ExtResource("9_wh18t")
text = "Wave 1/3"
metadata/_edit_use_anchors_ = true

[node name="Camera2D" type="Camera2D" parent="."]
unique_name_in_owner = true
anchor_mode = 0

[node name="Star" type="GPUParticles2D" parent="."]
unique_name_in_owner = true
modulate = Color(0.44, 0.44, 0.44, 1)
amount = 70
lifetime = 5.0
process_material = SubResource("ParticleProcessMaterial_osogt")

[node name="Player" parent="." instance=ExtResource("12_1rld6")]
unique_name_in_owner = true
position = Vector2(90, 267)

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("14_m11n4")
autoplay = true
